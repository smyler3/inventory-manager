<div class="filters-container">
    <form action="<%= action %>" method="GET" class="filter-form">
        <input type="hidden" name="sort" value="<%= sort && sort %>" />
        <label for="search" >Search by name</label>
        <div class="form-field-container">
            <input type="search" id="search" name="search" placeholder="Search..." value="<%= search && search %>" required />
            <button id="searchClear" class="filters-btn <%= search && "show" %>" type="button">Clear</button>
        </div>
    </form>
    
    <form action="<%= action %>" method="GET" class="filter-form">
        <input type="hidden" name="search" value="<%= search && search %>" />
        <label for="sort">Sort by</label>
        <div class="form-field-container">
            <select id="sort" name="sort">
                <% options.forEach(option => { %>
                    <option value="<%= option.id %>" <%= (Number(sort) === option.id && "selected") %>><%= option.label %></option>
                <% }) %>
            </select>
            <button id="sortClear" class="filters-btn <%= sort && "show" %>" type="button">Clear</button>
        </div>
    </form>
    
    <div class="button-container">
        <button id="filterSearch" type="button" class="filters-btn">Search</button>
        <button id="filterClearAll" type="button" class="filters-btn">Clear All</button>
    </div>
</div>

<script>
    // Clear button functionality for form
    document.getElementById("filterClearAll").addEventListener("click", () => {
        const url = new URL(window.location);

        url.searchParams.delete("search");
        url.searchParams.delete("sort");
        window.location.href = url.toString();
    });

    // Clear button functionality for form
    document.getElementById("searchClear").addEventListener("click", () => {
        const url = new URL(window.location);

        url.searchParams.delete("search");
        window.location.href = url.toString();
    });

    // Clear button functionality for form
    document.getElementById("sortClear").addEventListener("click", () => {
        const url = new URL(window.location);

        url.searchParams.delete("sort");
        window.location.href = url.toString();
    });

    // Reload the page with new sort query parameter after selecting sort option
    document.getElementById("sort").addEventListener("change", (e) => {
        const selectedParam = e.target.value;
        const url = new URL(window.location);

        url.searchParams.set("sort", selectedParam);
        window.location.href = url.toString();
    });
</script>

<style>
    .filters-container {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .filter-form {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .form-field-container > input,
    .form-field-container > select {
        padding: 4px 8px;

        max-width: 100%;

        font-size: 1rem;
        font-weight: 500;

        overflow-x: hidden;
    }

    .form-field-container {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 8px;
    }

    .button-container {
        display: flex;
        gap: 4px;
    }

    .filters-btn {
        display: flex;
        align-items: center;
        justify-content: center;

        min-height: 40px;
        min-width: 40px;
        padding: 8px 16px;

        font-size: 1rem;

        background: #F0F0F0;
        border: solid 1px #767676;
    }
</style>